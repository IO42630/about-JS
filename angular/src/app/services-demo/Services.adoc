= Services

=== Injection

* configuration:
- `@Injectable({providedIn: ...})` in Service
- `@NgModule({providers: ...})` in Module
- `@Component({providers: ...})` in Component
* injection:
- the injection itself happens in the Component via `constructor` param.

{empty} +

=== Injection Hierarchy

* services injected into an outer component are inherited to the nested component.
* if provide an inherited service again, it is overridden
** thus, a new instance is created and referenced.
** see demo, where we have one `DataService` instance, and two `LoggingService` instances.
* this leads also to the following behaviour of services provided in:
** `AppModule` : available application-wide
** `AppComponent` : available to all components, but not services
** `Component` : available to component and children (if any).

{empty} +

=== Injection (Modules)

|===
| `providers` in  | available | injector used | usage

| `AppModule` | app-wide | root injector | default
| `AppComponent`, `Component` | component tree | component specific | if scoped
| Eager-loaded Module | app-wide | root injector | avoid this
| Lazy-loaded Module | in loaded module | child injector | if scoped
|===

* dependencies of lazy-loaded modules become also lazy-loaded (-> new instance!!)

{empty} +

=== Magic Mock Web API

1. `InMemoryDbService.createDb()` defines some data store by returning `{xyz}`.
1. by including `HttpClientInMemoryWebApiModule` in `app.module`, +
we mock an endpoint at the canonical URL `api/xyz`.
1. we can now use `HttpClient.get(api/xyz)`
